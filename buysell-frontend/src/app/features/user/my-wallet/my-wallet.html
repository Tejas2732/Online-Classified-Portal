<div class="container">
  <h2>My Wallet</h2>

  <div *ngIf="wallet" class="balance-card">
    <h3>Available Balance</h3>
    <span class="amount">₹{{ wallet.balance }}</span>
  </div>

  <form [formGroup]="form" (ngSubmit)="recharge()" class="recharge-container">
  <div style="flex: 1;">
    <input 
      type="number" 
      placeholder="Enter Amount" 
      formControlName="amount"
      [class.error-border]="form.get('amount')?.invalid && form.get('amount')?.touched"
    >
    
    <div class="error-message" *ngIf="form.get('amount')?.touched">
      <small *ngIf="form.get('amount')?.hasError('max')">Maximum recharge is ₹10,000</small>
      <small *ngIf="form.get('amount')?.hasError('min')">Amount must be greater than 0</small>
    </div>
  </div>

  <button type="submit" [disabled]="loading || form.invalid" class="btn-success">
    Recharge
  </button>
</form>

  <hr>

  <div class="view-controls">
    <button (click)="loadWalletTransactions()" [disabled]="viewMode === 'WALLET'">
      Wallet
    </button>
    <button (click)="loadAllTransactions()" [disabled]="viewMode === 'ALL'">
      All History
    </button>
  </div>

  <h3>{{ viewMode === 'ALL' ? 'All Transactions' : 'Wallet Transactions' }}</h3>

  <div *ngIf="loading" class="alert">Loading...</div>
  <div *ngIf="!loading && transactions.length === 0" class="alert alert-error">
    No transactions found
  </div>

  <table *ngIf="transactions.length" class="transaction-table">
    <thead>
      <tr>
        <th>Type</th>
        <th>Amount</th>
        <th>Description</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let t of transactions">
        <td>
          <span [ngClass]="t.type === 'CREDIT' ? 'type-badge type-credit' : 'type-badge type-debit'">
            {{ t.type }}
          </span>
        </td>
        <td><strong>₹{{ t.amount }}</strong></td>
        <td>{{ t.description }}</td>
        <td>{{ t.createdAt | date:'mediumDate' }}</td>
      </tr>
    </tbody>
  </table>
</div>








<!-- <h2>My Wallet</h2>

<div *ngIf="wallet">
  <h3>Balance: ₹{{ wallet.balance }}</h3>
</div>

<button (click)="loadWalletTransactions()">Wallet Transactions</button>
<button (click)="loadAllTransactions()">All Transactions</button>

<hr>

<form [formGroup]="form" (ngSubmit)="recharge()">
  <input
    type="number"
    placeholder="Recharge Amount"
    formControlName="amount">
  <button type="submit" [disabled]="loading">
    Recharge
  </button>
</form>

<hr>

<h3 *ngIf="viewMode === 'WALLET'">Wallet Transactions</h3>
<h3 *ngIf="viewMode === 'ALL'">All Transactions</h3>

<div *ngIf="loading">Loading...</div>

<table *ngIf="transactions.length" border="1" width="100%">
  <tr>
    <th>Type</th>
    <th>Amount</th>
    <th>Balance After</th>
    <th>Description</th>
    <th>Date</th>
  </tr>

  <tr *ngFor="let t of transactions">
    <td>{{ t.type }}</td>
    <td>₹{{ t.amount }}</td>
    <td>{{ t.balanceAfter }}</td>
    <td>{{ t.description }}</td>
    <td>{{ t.createdAt | date:'short' }}</td>
  </tr>
</table>

<div *ngIf="!transactions.length && !loading">
  No transactions found
</div>
 -->











<!-- <h2>My Wallet</h2>

<div *ngIf="wallet">
  <h3>Balance: ₹{{ wallet.balance }}</h3>
</div>

<form [formGroup]="form" (ngSubmit)="recharge()">
  <input
    type="number"
    placeholder="Recharge Amount"
    formControlName="amount"
  >
  <button type="submit" [disabled]="loading">
    Recharge
  </button>
</form>

<hr>

<h3>Transaction History</h3>

<table border="1" width="100%">
  <tr>
    <th>Type</th>
    <th>Amount</th>
    <th>Balance After</th>
    <th>Description</th>
    <th>Date</th>
  </tr>

  <tr *ngFor="let t of transactions">
    <td>{{ t.type }}</td>
    <td>{{ t.amount }}</td>
    <td>{{ t.balanceAfter }}</td>
    <td>{{ t.description }}</td>
    <td>{{ t.createdAt | date:'short' }}</td>
  </tr>
</table> -->
